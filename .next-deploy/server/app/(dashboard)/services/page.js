(()=>{var e={};e.id=867,e.ids=[867],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},54400:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=t(70260),a=t(28203),n=t(25155),i=t.n(n),o=t(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["(dashboard)",{children:["services",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,39032)),"D:\\projects\\10massage\\src\\app\\(dashboard)\\services\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58426)),"D:\\projects\\10massage\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"D:\\projects\\10massage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\projects\\10massage\\src\\app\\(dashboard)\\services\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/services/page",pathname:"/services",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},32189:(e,r,t)=>{Promise.resolve().then(t.bind(t,39032))},76157:(e,r,t)=>{Promise.resolve().then(t.bind(t,57425))},57425:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>eF});var s=t(45512),a=t(58009),n=t(6868),i=t(81914),o=t(16131),l=t(39400),d=t(77722),c=t(75002),u=t(17184),m=t(31412),p=t(29952),f=t(6004),x=t(30830),h=t(39217),v=t(30096),b=t(92828),g=t(13024),y=t(59018),j="rovingFocusGroup.onEntryFocus",w={bubbles:!1,cancelable:!0},N="RovingFocusGroup",[k,R,E]=(0,h.N)(N),[A,C]=(0,f.A)(N,[E]),[S,M]=A(N),P=a.forwardRef((e,r)=>(0,s.jsx)(k.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(k.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(D,{...e,ref:r})})}));P.displayName=N;var D=a.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:t,orientation:n,loop:i=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...h}=e,v=a.useRef(null),N=(0,p.s)(r,v),k=(0,y.jH)(o),[E=null,A]=(0,g.i)({prop:l,defaultProp:d,onChange:c}),[C,M]=a.useState(!1),P=(0,b.c)(u),D=R(t),I=a.useRef(!1),[T,G]=a.useState(0);return a.useEffect(()=>{let e=v.current;if(e)return e.addEventListener(j,P),()=>e.removeEventListener(j,P)},[P]),(0,s.jsx)(S,{scope:t,orientation:n,dir:k,loop:i,currentTabStopId:E,onItemFocus:a.useCallback(e=>A(e),[A]),onItemShiftTab:a.useCallback(()=>M(!0),[]),onFocusableItemAdd:a.useCallback(()=>G(e=>e+1),[]),onFocusableItemRemove:a.useCallback(()=>G(e=>e-1),[]),children:(0,s.jsx)(x.sG.div,{tabIndex:C||0===T?-1:0,"data-orientation":n,...h,ref:N,style:{outline:"none",...e.style},onMouseDown:(0,m.m)(e.onMouseDown,()=>{I.current=!0}),onFocus:(0,m.m)(e.onFocus,e=>{let r=!I.current;if(e.target===e.currentTarget&&r&&!C){let r=new CustomEvent(j,w);if(e.currentTarget.dispatchEvent(r),!r.defaultPrevented){let e=D().filter(e=>e.focusable);F([e.find(e=>e.active),e.find(e=>e.id===E),...e].filter(Boolean).map(e=>e.ref.current),f)}}I.current=!1}),onBlur:(0,m.m)(e.onBlur,()=>M(!1))})})}),I="RovingFocusGroupItem",T=a.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:t,focusable:n=!0,active:i=!1,tabStopId:o,...l}=e,d=(0,v.B)(),c=o||d,u=M(I,t),p=u.currentTabStopId===c,f=R(t),{onFocusableItemAdd:h,onFocusableItemRemove:b}=u;return a.useEffect(()=>{if(n)return h(),()=>b()},[n,h,b]),(0,s.jsx)(k.ItemSlot,{scope:t,id:c,focusable:n,active:i,children:(0,s.jsx)(x.sG.span,{tabIndex:p?0:-1,"data-orientation":u.orientation,...l,ref:r,onMouseDown:(0,m.m)(e.onMouseDown,e=>{n?u.onItemFocus(c):e.preventDefault()}),onFocus:(0,m.m)(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:(0,m.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){u.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let r=function(e,r,t){var s;let a=(s=e.key,"rtl"!==t?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===r&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===r&&["ArrowUp","ArrowDown"].includes(a)))return G[a]}(e,u.orientation,u.dir);if(void 0!==r){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let t=f().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===r)t.reverse();else if("prev"===r||"next"===r){"prev"===r&&t.reverse();let s=t.indexOf(e.currentTarget);t=u.loop?function(e,r){return e.map((t,s)=>e[(r+s)%e.length])}(t,s+1):t.slice(s+1)}setTimeout(()=>F(t))}})})})});T.displayName=I;var G={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function F(e,r=!1){let t=document.activeElement;for(let s of e)if(s===t||(s.focus({preventScroll:r}),document.activeElement!==t))return}var O=t(38762),L=t(66582),_=t(98060),q="Radio",[$,z]=(0,f.A)(q),[J,V]=$(q),B=a.forwardRef((e,r)=>{let{__scopeRadio:t,name:n,checked:i=!1,required:o,disabled:l,value:d="on",onCheck:c,form:u,...f}=e,[h,v]=a.useState(null),b=(0,p.s)(r,e=>v(e)),g=a.useRef(!1),y=!h||u||!!h.closest("form");return(0,s.jsxs)(J,{scope:t,checked:i,disabled:l,children:[(0,s.jsx)(x.sG.button,{type:"button",role:"radio","aria-checked":i,"data-state":U(i),"data-disabled":l?"":void 0,disabled:l,value:d,...f,ref:b,onClick:(0,m.m)(e.onClick,e=>{i||c?.(),y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),y&&(0,s.jsx)(X,{control:h,bubbles:!g.current,name:n,value:d,checked:i,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});B.displayName=q;var H="RadioIndicator",K=a.forwardRef((e,r)=>{let{__scopeRadio:t,forceMount:a,...n}=e,i=V(H,t);return(0,s.jsx)(_.C,{present:a||i.checked,children:(0,s.jsx)(x.sG.span,{"data-state":U(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:r})})});K.displayName=H;var X=e=>{let{control:r,checked:t,bubbles:n=!0,...i}=e,o=a.useRef(null),l=(0,L.Z)(t),d=(0,O.X)(r);return a.useEffect(()=>{let e=o.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==t&&r){let s=new Event("click",{bubbles:n});r.call(e,t),e.dispatchEvent(s)}},[l,t,n]),(0,s.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function U(e){return e?"checked":"unchecked"}var Y=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Z="RadioGroup",[W,Q]=(0,f.A)(Z,[C,z]),ee=C(),er=z(),[et,es]=W(Z),ea=a.forwardRef((e,r)=>{let{__scopeRadioGroup:t,name:a,defaultValue:n,value:i,required:o=!1,disabled:l=!1,orientation:d,dir:c,loop:u=!0,onValueChange:m,...p}=e,f=ee(t),h=(0,y.jH)(c),[v,b]=(0,g.i)({prop:i,defaultProp:n,onChange:m});return(0,s.jsx)(et,{scope:t,name:a,required:o,disabled:l,value:v,onValueChange:b,children:(0,s.jsx)(P,{asChild:!0,...f,orientation:d,dir:h,loop:u,children:(0,s.jsx)(x.sG.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":l?"":void 0,dir:h,...p,ref:r})})})});ea.displayName=Z;var en="RadioGroupItem",ei=a.forwardRef((e,r)=>{let{__scopeRadioGroup:t,disabled:n,...i}=e,o=es(en,t),l=o.disabled||n,d=ee(t),c=er(t),u=a.useRef(null),f=(0,p.s)(r,u),x=o.value===i.value,h=a.useRef(!1);return a.useEffect(()=>{let e=e=>{Y.includes(e.key)&&(h.current=!0)},r=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]),(0,s.jsx)(T,{asChild:!0,...d,focusable:!l,active:x,children:(0,s.jsx)(B,{disabled:l,required:o.required,checked:x,...c,...i,name:o.name,ref:f,onCheck:()=>o.onValueChange(i.value),onKeyDown:(0,m.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,m.m)(i.onFocus,()=>{h.current&&u.current?.click()})})})});ei.displayName=en;var eo=a.forwardRef((e,r)=>{let{__scopeRadioGroup:t,...a}=e,n=er(t);return(0,s.jsx)(K,{...n,...a,ref:r})});eo.displayName="RadioGroupIndicator";var el=t(94825);let ed=(0,el.A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var ec=t(44195);let eu=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(ea,{className:(0,ec.cn)("grid gap-2",e),...r,ref:t}));eu.displayName=ea.displayName;let em=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(ei,{ref:t,className:(0,ec.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,s.jsx)(eo,{className:"flex items-center justify-center",children:(0,s.jsx)(ed,{className:"h-2.5 w-2.5 fill-current text-current"})})}));em.displayName=ei.displayName;let ep=(0,el.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var ef="Switch",[ex,eh]=(0,f.A)(ef),[ev,eb]=ex(ef),eg=a.forwardRef((e,r)=>{let{__scopeSwitch:t,name:n,checked:i,defaultChecked:o,required:l,disabled:d,value:c="on",onCheckedChange:u,form:f,...h}=e,[v,b]=a.useState(null),y=(0,p.s)(r,e=>b(e)),j=a.useRef(!1),w=!v||f||!!v.closest("form"),[N=!1,k]=(0,g.i)({prop:i,defaultProp:o,onChange:u});return(0,s.jsxs)(ev,{scope:t,checked:N,disabled:d,children:[(0,s.jsx)(x.sG.button,{type:"button",role:"switch","aria-checked":N,"aria-required":l,"data-state":eN(N),"data-disabled":d?"":void 0,disabled:d,value:c,...h,ref:y,onClick:(0,m.m)(e.onClick,e=>{k(e=>!e),w&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),w&&(0,s.jsx)(ew,{control:v,bubbles:!j.current,name:n,value:c,checked:N,required:l,disabled:d,form:f,style:{transform:"translateX(-100%)"}})]})});eg.displayName=ef;var ey="SwitchThumb",ej=a.forwardRef((e,r)=>{let{__scopeSwitch:t,...a}=e,n=eb(ey,t);return(0,s.jsx)(x.sG.span,{"data-state":eN(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:r})});ej.displayName=ey;var ew=e=>{let{control:r,checked:t,bubbles:n=!0,...i}=e,o=a.useRef(null),l=(0,L.Z)(t),d=(0,O.X)(r);return a.useEffect(()=>{let e=o.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==t&&r){let s=new Event("click",{bubbles:n});r.call(e,t),e.dispatchEvent(s)}},[l,t,n]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eN(e){return e?"checked":"unchecked"}let ek=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(eg,{className:(0,ec.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:t,children:(0,s.jsx)(ej,{className:(0,ec.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ek.displayName=eg.displayName;let eR=o.Ik({name:o.Yj().min(1,"名稱為必填"),description:o.Yj().min(1,"描述為必填"),type:o.k5(["SINGLE","COMBO"]),category:o.k5(["MASSAGE","CARE","TREATMENT"]),isRecommended:o.zM(),recommendOrder:o.ai().min(0),durations:o.YO(o.Ik({duration:o.ai().min(1,"時長為必填"),price:o.ai().min(1,"價格為必填")})).min(1,"至少需要一個時長"),masseurs:o.YO(o.Ik({id:o.Yj()})).min(1,"至少需要一個按摩師")});function eE({initialData:e,masseurs:r,onSubmit:t}){let[o,m]=(0,a.useState)(e?.durations||[{duration:0,price:0}]),{register:p,handleSubmit:f,formState:{errors:x},setValue:h,watch:v}=(0,n.mN)({resolver:(0,i.u)(eR),defaultValues:e||{type:"SINGLE",category:"MASSAGE",isRecommended:!1,recommendOrder:0,masseurs:[]}}),b=v("masseurs")||[],g=v("isRecommended"),y=e=>{let r=o.filter((r,t)=>t!==e);m(r),h("durations",r)},j=(e,r,t)=>{let s=[...o];s[e][r]=Number(t),m(s),h("durations",s)},w=e=>{b.some(r=>r.id===e)?h("masseurs",b.filter(r=>r.id!==e)):h("masseurs",[...b,{id:e}])};return(0,s.jsxs)("form",{onSubmit:f(t),className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"name",children:"服務名稱"}),(0,s.jsx)(d.p,{id:"name",...p("name")}),x.name&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:x.name.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"description",children:"服務描述"}),(0,s.jsx)(c.T,{id:"description",...p("description")}),x.description&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:x.description.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{children:"服務類型"}),(0,s.jsxs)(eu,{defaultValue:e?.type||"SINGLE",onValueChange:e=>h("type",e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(em,{value:"SINGLE",id:"single"}),(0,s.jsx)(u.J,{htmlFor:"single",children:"單人服務"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(em,{value:"COMBO",id:"combo"}),(0,s.jsx)(u.J,{htmlFor:"combo",children:"組合服務"})]})]}),x.type&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:x.type.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{children:"服務分類"}),(0,s.jsxs)(eu,{defaultValue:e?.category||"MASSAGE",onValueChange:e=>h("category",e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(em,{value:"MASSAGE",id:"massage"}),(0,s.jsx)(u.J,{htmlFor:"massage",children:"按摩"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(em,{value:"CARE",id:"care"}),(0,s.jsx)(u.J,{htmlFor:"care",children:"護理"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(em,{value:"TREATMENT",id:"treatment"}),(0,s.jsx)(u.J,{htmlFor:"treatment",children:"療程"})]})]}),x.category&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:x.category.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(u.J,{htmlFor:"isRecommended",children:"設為推薦服務"}),(0,s.jsx)(ek,{id:"isRecommended",checked:g,onCheckedChange:e=>h("isRecommended",e)})]}),g&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)(u.J,{htmlFor:"recommendOrder",children:"推薦排序"}),(0,s.jsx)(d.p,{id:"recommendOrder",type:"number",min:"0",...p("recommendOrder",{valueAsNumber:!0})}),x.recommendOrder&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:x.recommendOrder.message})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(u.J,{children:"服務時長與價格"}),o.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(d.p,{type:"number",placeholder:"時長(分鐘)",value:e.duration,onChange:e=>j(r,"duration",e.target.value)})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(d.p,{type:"number",placeholder:"價格",value:e.price,onChange:e=>j(r,"price",e.target.value)})}),(0,s.jsx)(l.$,{type:"button",variant:"destructive",size:"icon",onClick:()=>y(r),children:(0,s.jsx)(ep,{className:"h-4 w-4"})})]},r)),(0,s.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>{m([...o,{duration:0,price:0}])},children:"新增時長"}),x.durations&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:x.durations.message})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(u.J,{children:"選擇按摩師"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:r.map(e=>(0,s.jsx)("div",{className:`p-4 border rounded-lg cursor-pointer ${b.some(r=>r.id===e.id)?"border-primary bg-primary/10":""}`,onClick:()=>w(e.id),children:e.name},e.id))}),x.masseurs&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:x.masseurs.message})]}),(0,s.jsx)(l.$,{type:"submit",className:"w-full",children:e?"更新服務":"新增服務"})]})}let eA=(0,el.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),eC=(0,el.A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),eS=(0,t(21643).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function eM({className:e,variant:r,...t}){return(0,s.jsx)("div",{className:(0,ec.cn)(eS({variant:r}),e),...t})}var eP=t(90993),eD=t(79334),eI=t(53087);let eT={MASSAGE:"按摩",CARE:"護理",TREATMENT:"療程"},eG={MASSAGE:"bg-blue-100 text-blue-800",CARE:"bg-green-100 text-green-800",TREATMENT:"bg-purple-100 text-purple-800"};function eF(){let{data:e}=(0,eP.useSession)({required:!0,onUnauthenticated(){(0,eD.redirect)("/login")}});console.log("SESSION DATA:",e);let r=(0,eI.q)(e);console.log("IS ADMIN:",r,"ROLE:",e?.user?.role);let[t,n]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[p,f]=(0,a.useState)("ALL"),x=async()=>{try{let e=await fetch("/api/services");if(!e.ok)throw Error("Failed to fetch services");let r=await e.json();n(r)}catch(e){console.error("Error fetching services:",e)}},h=async e=>{try{let r=u?`/api/services/${u.id}`:"/api/services",t=u?"PUT":"POST";if(!(await fetch(r,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save service");c(!1),m(null),x()}catch(e){console.error("Error saving service:",e)}},v=async e=>{if(r&&confirm("確定要刪除這個服務嗎？"))try{if(!(await fetch(`/api/services/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete service");x()}catch(e){console.error("Error deleting service:",e)}},b=e=>{r&&(m(e),c(!0))},g=[..."ALL"===p?t:"RECOMMENDED"===p?t.filter(e=>e.isRecommended):t.filter(e=>e.category===p)].sort((e,r)=>e.isRecommended&&r.isRecommended?e.recommendOrder-r.recommendOrder:e.isRecommended?-1:r.isRecommended?1:0);if(d){let e=u?{...u,masseurs:u.masseurs.map(e=>({id:e.masseur.id}))}:void 0;return(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:u?"編輯服務":"新增服務"}),(0,s.jsx)(l.$,{variant:"outline",onClick:()=>{c(!1),m(null)},children:"返回"})]}),(0,s.jsx)(eE,{initialData:e,masseurs:i,onSubmit:h})]})}return(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"服務列表"}),r&&(0,s.jsxs)(l.$,{onClick:()=>c(!0),children:[(0,s.jsx)(eA,{className:"mr-2 h-4 w-4"})," 新增服務"]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[(0,s.jsx)(l.$,{variant:"ALL"===p?"default":"outline",onClick:()=>f("ALL"),children:"全部"}),(0,s.jsx)(l.$,{variant:"RECOMMENDED"===p?"default":"outline",onClick:()=>f("RECOMMENDED"),children:"推薦服務"}),Object.entries(eT).map(([e,r])=>(0,s.jsx)(l.$,{variant:p===e?"default":"outline",onClick:()=>f(e),children:r},e))]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-6 space-y-4 bg-white shadow-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:e.name}),e.isRecommended&&(0,s.jsx)(eM,{variant:"secondary",children:"推薦"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(eM,{variant:"outline",children:"SINGLE"===e.type?"單人服務":"組合服務"}),(0,s.jsx)(eM,{className:eG[e.category],children:eT[e.category]})]})]}),(0,s.jsx)("div",{className:"flex space-x-2",children:r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>b(e),children:(0,s.jsx)(eC,{className:"h-4 w-4"})}),(0,s.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>v(e.id),children:(0,s.jsx)(ep,{className:"h-4 w-4"})})]})})]}),(0,s.jsx)("p",{className:"text-gray-600",children:e.description}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-medium",children:"服務時長與價格："}),e.durations.map(e=>(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:[e.duration," 分鐘"]}),(0,s.jsxs)("span",{children:["$",e.price]})]},e.id))]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"提供按摩師："}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.masseurs.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-sm",children:e.masseur.name},e.masseur.id))})]})]},e.id))})]})}},77722:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var s=t(45512),a=t(58009),n=t(44195);let i=a.forwardRef(({className:e,type:r,...t},a)=>(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));i.displayName="Input"},17184:(e,r,t)=>{"use strict";t.d(r,{J:()=>c});var s=t(45512),a=t(58009),n=t(30830),i=a.forwardRef((e,r)=>(0,s.jsx)(n.sG.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var o=t(21643),l=t(44195);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(i,{ref:t,className:(0,l.cn)(d(),e),...r}));c.displayName=i.displayName},75002:(e,r,t)=>{"use strict";t.d(r,{T:()=>i});var s=t(45512),a=t(58009),n=t(44195);let i=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...r}));i.displayName="Textarea"},39032:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\projects\\\\10massage\\\\src\\\\app\\\\(dashboard)\\\\services\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\projects\\10massage\\src\\app\\(dashboard)\\services\\page.tsx","default")},39217:(e,r,t)=>{"use strict";t.d(r,{N:()=>l});var s=t(58009),a=t(6004),n=t(29952),i=t(12705),o=t(45512);function l(e){let r=e+"CollectionProvider",[t,l]=(0,a.A)(r),[d,c]=t(r,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:r,children:t}=e,a=s.useRef(null),n=s.useRef(new Map).current;return(0,o.jsx)(d,{scope:r,itemMap:n,collectionRef:a,children:t})};u.displayName=r;let m=e+"CollectionSlot",p=s.forwardRef((e,r)=>{let{scope:t,children:s}=e,a=c(m,t),l=(0,n.s)(r,a.collectionRef);return(0,o.jsx)(i.DX,{ref:l,children:s})});p.displayName=m;let f=e+"CollectionItemSlot",x="data-radix-collection-item",h=s.forwardRef((e,r)=>{let{scope:t,children:a,...l}=e,d=s.useRef(null),u=(0,n.s)(r,d),m=c(f,t);return s.useEffect(()=>(m.itemMap.set(d,{ref:d,...l}),()=>void m.itemMap.delete(d))),(0,o.jsx)(i.DX,{[x]:"",ref:u,children:a})});return h.displayName=f,[{Provider:u,Slot:p,ItemSlot:h},function(r){let t=c(e+"CollectionConsumer",r);return s.useCallback(()=>{let e=t.collectionRef.current;if(!e)return[];let r=Array.from(e.querySelectorAll(`[${x}]`));return Array.from(t.itemMap.values()).sort((e,t)=>r.indexOf(e.ref.current)-r.indexOf(t.ref.current))},[t.collectionRef,t.itemMap])},l]}},59018:(e,r,t)=>{"use strict";t.d(r,{jH:()=>n});var s=t(58009);t(45512);var a=s.createContext(void 0);function n(e){let r=s.useContext(a);return e||r||"ltr"}},30096:(e,r,t)=>{"use strict";t.d(r,{B:()=>l});var s,a=t(58009),n=t(49397),i=(s||(s=t.t(a,2)))["useId".toString()]||(()=>void 0),o=0;function l(e){let[r,t]=a.useState(i());return(0,n.N)(()=>{e||t(e=>e??String(o++))},[e]),e||(r?`radix-${r}`:"")}},30830:(e,r,t)=>{"use strict";t.d(r,{sG:()=>i});var s=t(58009);t(55740);var a=t(12705),n=t(45512),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let t=s.forwardRef((e,t)=>{let{asChild:s,...i}=e,o=s?a.DX:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(o,{...i,ref:t})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{})},66582:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(58009);function a(e){let r=s.useRef({value:e,previous:e});return s.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}},38762:(e,r,t)=>{"use strict";t.d(r,{X:()=>n});var s=t(58009),a=t(49397);function n(e){let[r,t]=s.useState(void 0);return(0,a.N)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let s,a;if(!Array.isArray(r)||!r.length)return;let n=r[0];if("borderBoxSize"in n){let e=n.borderBoxSize,r=Array.isArray(e)?e[0]:e;s=r.inlineSize,a=r.blockSize}else s=e.offsetWidth,a=e.offsetHeight;t({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,154,347,77,504,934,899],()=>t(54400));module.exports=s})();