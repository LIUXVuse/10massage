(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{7024:(e,r,s)=>{Promise.resolve().then(s.bind(s,9594))},9594:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var n=s(5155),o=s(8173),t=s.n(o),i=s(6046),a=s(2615),d=s(3312),l=s(8291);function c(e){var r,s,o,c,u;let{children:h}=e,v=(0,i.useRouter)(),{data:f,status:g}=(0,a.useSession)(),x=(0,l.q)(f);return"loading"===g?(0,n.jsx)("div",{children:"載入中..."}):"unauthenticated"===g?(v.replace("/login"),null):(0,n.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,n.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,n.jsxs)("div",{className:"container flex h-14 items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-6 md:gap-10",children:[(0,n.jsx)(t(),{href:"/dashboard",className:"flex items-center space-x-2",children:(0,n.jsx)("span",{className:"font-bold",children:"伊林SPA"})}),(0,n.jsxs)("nav",{className:"flex gap-6",children:[(0,n.jsx)(t(),{href:"/dashboard",className:"transition-colors hover:text-foreground/80 text-foreground",children:"儀表板"}),(0,n.jsx)(t(),{href:"/masseurs",className:"transition-colors hover:text-foreground/80 text-foreground",children:"查看按摩師"}),(0,n.jsx)(t(),{href:"/services",className:"transition-colors hover:text-foreground/80 text-foreground",children:"服務項目"}),x&&(0,n.jsx)(t(),{href:"/users",className:"transition-colors hover:text-foreground/80 text-foreground",children:"用戶管理"})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[null==f?void 0:null===(r=f.user)||void 0===r?void 0:r.name," (",(null==f?void 0:null===(o=f.user)||void 0===o?void 0:null===(s=o.role)||void 0===s?void 0:s.toUpperCase())==="ADMIN"?"管理員":(null==f?void 0:null===(u=f.user)||void 0===u?void 0:null===(c=u.role)||void 0===c?void 0:c.toUpperCase())==="MASSEUR"?"按摩師":"會員",")"]}),(0,n.jsx)(d.$,{variant:"ghost",onClick:()=>{(0,a.signOut)({callbackUrl:"/login",redirect:!0}).catch(e=>{console.error("登出時發生錯誤:",e),window.location.href="/login"})},children:"登出"})]})]})}),(0,n.jsx)("main",{className:"container py-6",children:h})]})}},3312:(e,r,s)=>{"use strict";s.d(r,{$:()=>l});var n=s(5155),o=s(2115),t=s(2317),i=s(1027),a=s(1567);let d=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,r)=>{let{className:s,variant:o,size:i,asChild:l=!1,...c}=e,u=l?t.DX:"button";return(0,n.jsx)(u,{className:(0,a.cn)(d({variant:o,size:i,className:s})),ref:r,...c})});l.displayName="Button"},8291:(e,r,s)=>{"use strict";function n(e){var r,s;return(null==e?void 0:null===(s=e.user)||void 0===s?void 0:null===(r=s.role)||void 0===r?void 0:r.toUpperCase())==="ADMIN"}s.d(r,{q:()=>n})},1567:(e,r,s)=>{"use strict";s.d(r,{cn:()=>t});var n=s(3463),o=s(9795);function t(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,o.QP)((0,n.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[374,615,130,441,517,358],()=>r(7024)),_N_E=e.O()}]);