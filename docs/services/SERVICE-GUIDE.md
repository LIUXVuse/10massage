# 伊林SPA服務項目功能綜合指南

*文檔創建日期：2025-03-02*
*最後更新：2025-03-02*

## 目錄

1. [服務功能概述](#服務功能概述)
2. [服務項目結構](#服務項目結構)
   - [頭療課程](#頭療課程)
   - [熱蠟美肌淨毛](#熱蠟美肌淨毛)
   - [中式課程方案](#中式課程方案)
   - [泰式能量課程](#泰式能量課程)
3. [系統支援的定價類型](#系統支援的定價類型)
4. [功能實現現狀](#功能實現現狀)
5. [問題診斷](#問題診斷)
6. [解決方案](#解決方案)
   - [短期解決方案](#短期解決方案)
   - [中長期解決方案](#中長期解決方案)
7. [實施計劃](#實施計劃)
8. [延伸閱讀](#延伸閱讀)

## 服務功能概述

伊林SPA預約系統的服務項目功能允許管理員設置和管理各種服務選項，包括：

- 基本服務信息（名稱、描述、類型）
- 多時長多價格設定
- 服務與按摩師關聯
- 服務分類與推薦設置

當前版本支持基本的多時長價格設定，未來將擴展以支持更複雜的定價策略（如性別差異化定價、身體部位定價等）。

## 服務項目結構

本節基於2025年3月服務菜單圖片分析，記錄系統需支援的服務類型與價格結構。

### 頭療課程

**服務類型**: 頭部護理，包含多個子項目
**基本價格**: NT$1,500 (60分鐘)

#### 子項目/流程
1. **頭部**:
   - 精油嗅吸
   - 頭部精油
   - 木梳頭皮
   - 頭部按筋
   - 頭部深層按摩

2. **臉部**:
   - 洗臉
   - 臉部去角質
   - 蘆薈敷臉
   - 臉部按筋
   - 臉部清潔

3. **髮浴**:
   - 頭皮去角質
   - 葉綠素去頭味
   - 洗髮
   - 頭部按摩
   - 頸部按摩
   - 燈光水循環
   - 前胸按摩
   - 肩膀按摩
   - 吹乾

4. **按摩**:
   - 燈光水循環
   - 手部按摩
   - 腿部按摩

### 熱蠟美肌淨毛

**服務類型**: 脫毛服務
**服務特點**: 性別差異化定價、身體部位差異化定價、加購區選項

#### 主要服務價格
- **巴西式私密處全除**:
  - 男士: NT$2,700
  - 女士: NT$2,500

#### 身體部位價格
- 全腿: NT$2,500
- 全手: NT$2,000
- 腹部: NT$1,500
- 鬍子: NT$1,500
- 腋下: NT$799
- 肛周: NT$799
- 上手: NT$1,000
- 下手: NT$1,000
- 小腿: NT$1,000
- 大腿: NT$1,500
- 胸部: NT$1,500

#### 加購區
- 每區額外 NT$200
- 可選項目:
  - 鼻毛
  - 乳頭毛
  - 髡角毛
  - 手指頭
  - 腳趾頭
  - 肚臍毛

#### 服務人員
熱蠟老師: 琳、雷、萱

### 中式課程方案

**服務類型**: 按摩療程
**時長**: 固定時長(60分鐘)與變動時長(120分鐘套餐)

#### 單項服務 (60分鐘)
- 中式指壓: NT$1,200
- 精油按摩: NT$1,200
- 腳底按摩: NT$1,000
- 艾草溫罐: NT$1,300
- 耳燭課程: NT$1,300
- 頭療髮浴: NT$1,500
- 嫩白去角質: NT$1,500 (50分鐘)

#### 中式元氣套餐 (120分鐘 - NT$2,000)
**基礎課程**: 深層指壓/精油按摩
**附加項目**: 免費六選二可搭配
- 經絡刮痧
- 循環體刷
- 嫩白去角質
- 頭部按筋
- 芳香耳燭
- 拉筋伸展

#### 組合服務 (套餐)
1. **從頭到腳** (120分鐘 - NT$2,000):
   - 身體按摩 (60分鐘)
   - 腳底按摩 (60分鐘)

2. **溫暖排濕** (120分鐘 - NT$2,300):
   - 身體按摩 (60分鐘)
   - 艾草溫罐 (60分鐘)

3. **頭壓解放** (120分鐘 - NT$2,500):
   - 身體按摩 (60分鐘)
   - 頭療髮浴 (60分鐘)

### 泰式能量課程

**服務類型**: 泰式按摩
**師資**: 技術教學導師 方真JOY (伊伊老師)

#### 泰皇密宗課程
- 龍筋/鳳筋 (60分鐘): NT$3,000 (皆無身體按摩)
- 龍筋/鳳筋 (80分鐘): NT$3,600 (可搭配其他課程)
- 加時30分鐘: NT$1,500

#### 資深泰式老師
琳、雷、杉、萱

#### 套餐服務
1. **宮廷課程** (60分鐘 - NT$2,000):
   - 泰式能量 (無身體按摩)

2. **貴族課程** (90分鐘 - NT$2,000):
   - 泰式能量 (30分鐘)
   - A (60分鐘)

3. **御用課程** (120分鐘 - NT$2,700):
   - 泰式能量 (60分鐘)
   - 身體按摩 (60分鐘)
   - 加時30分鐘選項:
     - 身體按摩: NT$700
     - 泰式能量: NT$1,000

#### 特別說明
方真JOY指導老師於泰國專業受訓擁有泰國雙證，無色情服務。
操作部位：腹部、鼠蹊部、陰囊、會陰與肛門周邊。
不會碰觸到外生殖器、無侵入手法、非治療行為。

## 系統支援的定價類型

1. **性別差異定價**:
   例如：巴西式私密處全除 (男士 vs 女士)

2. **身體部位定價**:
   例如：全腿、全手、腹部等不同部位價格不同

3. **時長與價格關係**:
   例如：60分鐘、80分鐘、120分鐘不同時長的價格差異

4. **套餐組合定價**:
   例如：身體按摩+腳底按摩=從頭到腳套餐

5. **附加選項**:
   例如：免費六選二項目、加購區200元/區

6. **按摩師等級定價**:
   例如：資深泰式老師與指導老師價格差異

7. **加時費用**:
   例如：加時30分鐘的額外費用

## 功能實現現狀

目前系統已實現的服務項目功能：

1. **基本服務管理**: 創建、編輯、刪除服務項目
2. **多時長價格設定**: 一個服務可以設置多個時長和對應價格
3. **按摩師關聯**: 服務可以關聯到多個按摩師
4. **分類與推薦**: 服務可以分類並設置為推薦服務

尚未實現的高級定價功能：
- 性別差異化定價
- 身體部位定價
- 附加選項定價
- 複雜套餐組合

## 問題診斷

我們分析了伊林SPA預約系統中服務項目功能的問題，發現以下主要問題：

1. **服務項目保存失敗**：表單提交時發生客戶端異常。
2. **數據模型不支持複雜價格策略**：目前的模型無法支援性別定價、身體部位定價、附加選項等複雜價格結構。
3. **API處理邏輯缺少足夠的錯誤檢查**：缺乏輸入驗證和詳細的錯誤日誌記錄。

## 解決方案

### 短期解決方案

為了立即解決服務項目保存問題，我們已經進行了以下修改：

1. **數據類型處理問題修復**：
   - 確保正確的Prisma客戶端初始化
   - 改進了數據類型轉換和驗證

2. **API邏輯優化**：
   - 重構了API路由文件，確保數據處理正確
   - 增強了錯誤處理和日誌記錄

3. **前端數據處理改進**：
   - 優化前端頁面處理服務數據的方式
   - 增加更詳細的日誌記錄和錯誤處理

> **當前狀態**: 短期解決方案已部署到生產環境並經過測試，服務管理功能現在可以正常使用。

### 中長期解決方案

為了支持所有需要的價格策略，我們建議按以下步驟進行系統升級：

#### 1. 數據庫模型擴展(3-4週)
- 添加新的數據表以支持不同類型的價格策略：
  - `ServiceGenderPrice`: 性別差異化定價
  - `ServiceAreaPrice`: 身體部位定價
  - `ServiceAddon`: 附加服務選項
  - `ServicePackage`: 服務套餐組合
- 開發數據遷移腳本，確保現有數據順利過渡到新模型

#### 2. API改進(2-3週)
- 開發新的API端點來支持擴展的功能
- 更新現有API以支持新的數據結構
- 增強API文檔，方便前端開發者理解和使用

#### 3. UI改進(3-4週)
- 重新設計服務管理界面，支持所有價格策略的配置
- 開發新的前端組件來支持複雜的數據輸入
- 使界面更直觀，減少用戶操作錯誤

## 實施計劃

我們建議按以下時間表實施解決方案：

| 階段 | 時間 | 任務 |
|------|------|------|
| 第1階段 | 立即 | 部署表單和API修復，解決服務保存問題 |
| 第2階段 | 1-2週 | 數據庫模型設計最終確認和優化 |
| 第3階段 | 3-6週 | 數據庫遷移和API擴展開發 |
| 第4階段 | 7-10週 | 前端界面重新設計和開發 |
| 第5階段 | 10-12週 | 測試、調整和最終部署 |

## 延伸閱讀

- [服務測試指南](./TEST-GUIDE.md)
- [服務數據模型分析](./SERVICE-MODEL.md)
- [服務數據示例](./service-data-samples/service-data.json) 